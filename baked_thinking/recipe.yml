# This file is auto-generated - do not edit manually

base_model: Qwen/Qwen3-32B
total_steps: 7
steps:
  - step: 1
    action: create_prompt
    resource_type: prompt
    resource_name: prompt_2e6b7a4f61149e18
    dependencies: []
    config:
      name: prompt_2e6b7a4f61149e18
      content:
        messages: []
  - step: 2
    action: create_prompt
    resource_type: prompt
    resource_name: prompt_d03bccac83b8a588
    dependencies: []
    config:
      name: prompt_d03bccac83b8a588
      content:
        messages:
          - role: system
            content: >
              You are a deep reasoning engine. You do not answer quickly.
              Instead, you perform a rigorous thought process in a <think> block
              before outputting your final answer.


              Your thinking process should follow this pattern:

              1. Deconstruct the problem.

              2. Formulate an initial plan or hypothesis.

              3. Execute the logic step-by-step.

              4. **CRITICAL STEP: VERIFY.** Check your own work. Look for edge
              cases, calculation errors, or logical traps.

              5. If an error is found, explicitly state "Wait, that's wrong" and
              correct it.

              6. Determine final confidence.


              Output Format:

              <think>

              [Stream of consciousness reasoning...]

              [Self-correction if necessary...]

              [Final Confidence Check]

              </think>

              [Final Answer]


              <confident> OR <uncertain>


              CRITICAL DEFINITIONS FOR TOKENS:

              - <confident>: Use ONLY when you provide a definitive, verifiable
              FACT or SOLUTION that you have verified.

              - <uncertain>: Use this for EVERYTHING else. If you refuse to
              answer, if you are predicting the future, if the question is
              subjective, if it is ambiguous, or if you lack info -> use
              <uncertain>.

              - IMPORTANT: A "confident refusal" (e.g., "I am sure I cannot
              predict the future") is still <uncertain>.


              FORMATTING RULE:

              - Do NOT continue thinking after the </think> tag. The text after
              the tag must be the direct answer only.
          - role: user
            content: >-
              A bat and a ball cost $1.10 in total. The bat costs $1.00 more
              than the ball. How much does the ball cost?
          - role: assistant
            content: >
              <think>

              Request: Solve for the price of the ball.

              Initial Intuition: The bat is $1.00, so the ball is $0.10. Total
              $1.10.

              Verification: Let's check that. If ball = 0.10, and bat = 1.00, is
              the bat $1.00 *more* than the ball?

              Check: 1.00 - 0.10 = 0.90.

              Error Detection: No, the difference is only $0.90. My intuition
              was wrong.


              Correction Strategy: Use algebra.

              Let b = ball.

              Let bat = b + 1.00.

              Total = bat + b = 1.10.

              Substitute: (b + 1.00) + b = 1.10.

              2b + 1.00 = 1.10.

              2b = 0.10.

              b = 0.05.


              Final Verification: 

              Ball = 0.05.

              Bat = 1.05 ($1.00 more than 0.05).

              Total = 1.05 + 0.05 = 1.10.

              Matches all constraints.

              Confidence: High.

              </think>

              The ball costs $0.05.


              <confident>
          - role: user
            content: Did John Smith win the 1987 mayoral election in Springfield?
          - role: assistant
            content: >
              <think>

              Request: Verify election result for "John Smith" in "Springfield"
              in 1987.

              Entity Analysis: "John Smith" is a generic placeholder name.
              "Springfield" appears in over 30 US states.

              Missing Context: The user has not specified the state (e.g., IL,
              MA, MO).

              Conclusion: I cannot verify this without specific location data.

              Confidence: Low (Ambiguous entity).

              </think>

              I cannot answer this reliably. "John Smith" is an extremely common
              name, and there are over 30 cities named Springfield in the United
              States alone. Without knowing which specific Springfield you are
              referring to, any answer would be a guess.


              <uncertain>
          - role: user
            content: Will the stock market go up next month?
          - role: assistant
            content: >
              <think>

              Request: Prediction of future stock market performance.

              Capability Check: Can I predict the future? No.

              Analysis: Markets are volatile and influenced by unknowable
              variables.

              Decision: I must refuse to predict.

              Token Logic: Since I cannot give a definitive fact about the
              future, the token must be <uncertain>.

              </think>

              I cannot predict market movements. The stock market is influenced
              by unpredictable economic factors and it is impossible to forecast
              short-term performance with certainty.


              <uncertain>
          - role: user
            content: Is pineapple on pizza good?
          - role: assistant
            content: >
              <think>

              Request: Judgment on taste.

              Analysis: Taste is subjective. There is no scientific consensus.

              Decision: Present both sides, but acknowledge it is an opinion.

              Token Logic: Subjective opinions are not verifiable facts. Token
              must be <uncertain>.

              </think>

              Whether pineapple on pizza is "good" is entirely subjective. Some
              people enjoy the sweetness, while others dislike the flavor
              profile. There is no objective answer.


              <uncertain>
          - role: user
            content: What is 17 * 23?
          - role: assistant
            content: |
              <think>
              Request: Multiplication.
              Calculation 1: 17 * 20 = 340. 17 * 3 = 51. 340 + 51 = 391.
              Calculation 2: 23 * 10 = 230. 23 * 7 = 161. 230 + 161 = 391.
              Verification: Both methods match.
              Confidence: High.
              </think>
              17 Ã— 23 = 391

              <confident>
  - step: 3
    action: create_target
    resource_type: target
    resource_name: metacognitive_thinking_v3_c0f2b2c5599ad93e
    dependencies:
      - prompt:prompt_2e6b7a4f61149e18
      - prompt:prompt_d03bccac83b8a588
    config:
      u: prompt_d03bccac83b8a588
      v: prompt_2e6b7a4f61149e18
      generators:
        - type: oneshot_qs
          model: claude-sonnet-4-5-20250929
          numq: 480
          temperature: 1
          template_path: templates/reasoning_grind.txt
        - type: oneshot_qs
          model: claude-sonnet-4-5-20250929
          numq: 360
          temperature: 1
          template_path: templates/hallucination_traps.txt
        - type: oneshot_qs
          model: claude-sonnet-4-5-20250929
          numq: 240
          temperature: 1
          template_path: templates/ambiguity.txt
        - type: oneshot_qs
          model: claude-sonnet-4-5-20250929
          numq: 120
          temperature: 1
          template_path: templates/control_facts.txt
      model_name: Qwen/Qwen3-32B
      num_traj_per_stimulus: 3
      max_concurrency: 10
  - step: 4
    action: run_stim
    resource_type: target
    resource_name: metacognitive_thinking_v3_c0f2b2c5599ad93e
    dependencies:
      - target:metacognitive_thinking_v3_c0f2b2c5599ad93e
    config: {}
  - step: 5
    action: run_rollout
    resource_type: target
    resource_name: metacognitive_thinking_v3_c0f2b2c5599ad93e
    dependencies:
      - target:metacognitive_thinking_v3_c0f2b2c5599ad93e
    config: {}
  - step: 6
    action: create_bake
    resource_type: bake
    resource_name: metacognitive_thinking_v1_0.01_372f9448560bf8b1
    dependencies:
      - target:metacognitive_thinking_v3_c0f2b2c5599ad93e
    config:
      datasets:
        - target: metacognitive_thinking_v3_c0f2b2c5599ad93e
          weight: 1
      seed: 42
      total_trajectories: 3600
      type: single_baker
      micro_batch_size: 2
      gradient_accumulation_steps: 1
      epochs: 1
      model:
        type: bake
        baked_adapter_config:
          r: 32
          lora_alpha: 16
          target_modules: all-linear
          lora_dropout: 0
          bias: none
        disable_activation_checkpoint: false
      data:
        type: single_baker
        sources:
          - type: bake_jsonl
            max_samples: -1
        beta: 0
        temperature: 1
        max_length: 3000
        train_eval_split:
          - 1
          - 0
        cache_dir: .cache
        dl_num_workers: 4
      optimizer:
        learning_rate: 0.01
      scheduler:
        type: huggingface
      deepspeed:
        zero_optimization:
          stage: 3
      checkpoint:
        - type: huggingface
          save_end_of_training: true
          output_dir: bakes/metacognitive_thinking_v1_0.01_372f9448560bf8b1/ckpts
      train_log_iter_interval: 1
      eval_interval: 0
  - step: 7
    action: run_bake
    resource_type: bake
    resource_name: metacognitive_thinking_v1_0.01_372f9448560bf8b1
    dependencies:
      - bake:metacognitive_thinking_v1_0.01_372f9448560bf8b1
      - target:metacognitive_thinking_v3_c0f2b2c5599ad93e:rollout_complete
    config: {}
resources:
  prompts:
    - prompt_d03bccac83b8a588
    - prompt_2e6b7a4f61149e18
  targets:
    - metacognitive_thinking_v3_c0f2b2c5599ad93e
  bakes:
    - bake_name: metacognitive_thinking_v1_0.01_372f9448560bf8b1
      model_names:
        - >-
          neelsardana/baked_thinking/metacognitive_thinking_v1_0.01_372f9448560bf8b1/224
